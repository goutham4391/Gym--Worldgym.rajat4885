var googleMapSettings={fullscreen:!1,showMapTypes:!1,streetView:!1,scrollZoom:!1};function distanceInMiles(e,t,o,l){if(!($.isNumeric(e)&&$.isNumeric(t)&&$.isNumeric(o)&&$.isNumeric(l)))return Number.MAX_SAFE_INTEGER;var i=(o-e).toRad(),a=(l-t).toRad(),s=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e.toRad())*Math.cos(o.toRad())*Math.sin(a/2)*Math.sin(a/2);return 3959*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}function displayWorldGymMap(o,e,t,l){void 0===t&&(t=!1),void 0===l&&(l=!0);var i=document.getElementById(e),a=$(window).width();if(null!=document.getElementById(e)&&0<o.length){var s={mapTypeId:google.maps.MapTypeId.ROADMAP,fullscreenControl:googleMapSettings.fullscreen,mapTypeControl:googleMapSettings.showMapTypes,streetViewControl:googleMapSettings.streetView,scrollwheel:googleMapSettings.scrollZoom,center:{lat:o[0].Latitude,lng:o[0].Longitude},styles:[{featureType:"all",elementType:"geometry.fill",stylers:[{color:"#494949"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"all",stylers:[{invert_lightness:!0},{saturation:"0"},{gamma:"1.00"},{color:"#434343"},{visibility:"on"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#ffffff"},{lightness:"-9"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"administrative.neighborhood",elementType:"all",stylers:[{visibility:"off"},{color:"#494949"}]},{featureType:"landscape",elementType:"all",stylers:[{lightness:"4"},{visibility:"on"},{color:"#434343"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"},{color:"#494949"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"on"},{color:"#747474"},{lightness:"0"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{lightness:"0"},{gamma:"0.67"},{weight:"1"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"on"},{saturation:"-100"},{lightness:"-13"}]},{featureType:"road.highway",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.fill",stylers:[{lightness:"-8"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{weight:"1.50"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{visibility:"on"},{weight:"0.50"},{color:"#575757"}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"all",stylers:[{color:"#575757"},{lightness:"11"}]},{featureType:"road.local",elementType:"geometry",stylers:[{weight:"0.4"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:"-36"}]},{featureType:"road.local",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"},{color:"#808080"}]},{featureType:"transit",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#494949"},{lightness:"3"}]},{featureType:"transit",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{lightness:"0"},{color:"#282828"}]},{featureType:"water",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]}]},r=new google.maps.Map(i,s);google.maps.event.addListenerOnce(r,"tilesloaded",function(){var e=setInterval(function(){0<$(".adamap button[title='Zoom out'] img").length&&($(".adamap iframe").attr("title","Location of World Gyms"),$(".adamap button img").attr("alt","map control"),$(".adamap a img").attr("alt","Click to see this area on Google Maps"),$(".adamap button[title='Zoom in'] img").attr("alt","Zoom in"),$(".adamap button[title='Zoom out'] img").attr("alt","Zoom out"),clearInterval(e))},100)});var n,y=new google.maps.LatLngBounds,f=17,p=[],m=new google.maps.Size(-180,-75);a<991&&(m=new google.maps.Size(-129,-75),f=12);for(var g=new InfoBox({disableAutoPan:!1,maxWidth:360,pixelOffset:m,alignBottom:!0,zIndex:null,closeBoxURL:"/root/assets/images/mapinfoclose.gif",isHidden:!1,pane:"floatPane",enableEventPropagation:!1}),d=0;d<o.length;d++){var c=new google.maps.Marker({position:new google.maps.LatLng(o[d].Latitude,o[d].Longitude),map:r,icon:"/root/assets/images/mapmarker-icon.png"});l&&(c.addListener("click",function(){r.setZoom(f),r.setCenter(this.getPosition());var e=document.createElement("div");new CenterControl(e,r,y);e.index=1,0==r.controls[google.maps.ControlPosition.TOP_LEFT].length&&r.controls[google.maps.ControlPosition.TOP_LEFT].push(e)}),google.maps.event.addListener(c,"click",function(e,t){return function(){n=buildInfoBoxContent(o[t]),g.setContent(n),g.open(r,e),setTimeout(function(){SwapInfoBoxPhoneNumbers(o[t].LocationNumber,o[t].PhoneWithOutCountryCode)},1500)}}(c,d))),y.extend(c.position),p.push(c)}if(t)new MarkerClusterer(r,p,{imagePath:"/assets/js/markercluster",styles:[{url:"/assets/js/markercluster25.png",height:34,width:25,anchorText:[-5,0],textColor:"#fff",textSize:10},{url:"/assets/js/markercluster30.png",height:41,width:30,anchorText:[-5,0],textColor:"#fff",textSize:11},{url:"/assets/js/markercluster40.png",height:55,width:40,anchorText:[-5,0],textColor:"#fff",textSize:12}]});if(y.getNorthEast().equals(y.getSouthWest())){var u=new google.maps.LatLng(y.getNorthEast().lat()+.01,y.getNorthEast().lng()+.01),h=new google.maps.LatLng(y.getNorthEast().lat()-.01,y.getNorthEast().lng()-.01);y.extend(u),y.extend(h)}google.maps.event.addListener(r,"bounds_changed",function(){if(zoomLevel=r.getZoom(),zoomLevel>=f)for(var e=0;e<p.length;e++)p[e].setTitle("");else for(e=0;e<p.length;e++)p[e].setTitle("Click to zoom")}),r.setCenter(y.getCenter()),1==p.length?r.setZoom(15):r.fitBounds(y)}}function buildInfoBoxContent(e){var t=document.createElement("div");t.className="infoContent";var o,l=document.getElementById("locationInfoBoxTemplate").innerHTML,i="";""!=e.Line1&&(i+=e.Line1),""!=e.Line2&&(""!=i&&(i+=", "),i+=e.Line2),""!=e.City&&(""!=i&&(i+=", "),i+=e.City),""!=e.State&&(""!=i&&(i+=", "),i+=e.State),""!=e.Postal&&(""!=i&&(i+=", "),i+=e.Postal);return o=e.PhoneWithOutCountryCode.replace(/\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d)/g,"$1-$2-$3"),l=(l=(l=(l=(l=l.replace("{{NAME}}",e.LocationName)).replace("{{ADDRESS}}",i)).replace("{{PHONE}}",e.PhoneWithOutCountryCode)).replace("{{FormattedPhone}}",o)).replace("{{SITELINK}}",e.MicroSiteUrl),t.innerHTML=l,t}function SwapInfoBoxPhoneNumbers(l,i){YoTrack.trackingLineById("worldgym-"+l).then(function(o){$(".infoPhone a").each(function(){var e=$(this).text(),t=i.replace(/\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d)/g,"$1-$2-$3");void 0!==foundLocation&&foundLocation.LocationNumber.toLocaleLowerCase()===l.toLocaleLowerCase()&&void 0!==foundLocation.Phone&&0<foundLocation.Phone.length&&(o=foundLocation.Phone),$(this).text(e.replace(i,o)),$(this).text(e.replace(t,o)),this.href=this.href.replace("tel:"+i,"tel:"+o)})})}function CenterControl(e,t,o){var l=document.createElement("div");l.style.backgroundColor="#fff",l.style.border="2px solid #fff",l.style.borderRadius="3px",l.style.boxShadow="0 2px 6px rgba(0,0,0,.3)",l.style.cursor="pointer",l.style.marginTop="10px",l.style.marginLeft="10px",l.style.marginBottom="22px",l.style.textAlign="center",l.title="Click to reset the map",e.appendChild(l);var i=document.createElement("div");i.style.color="rgb(25,25,25)",i.style.fontFamily="Roboto,Arial,sans-serif",i.style.fontSize="11px",i.style.lineHeight="22px",i.style.paddingLeft="5px",i.style.paddingRight="5px",i.innerHTML="Reset Map",l.appendChild(i),l.addEventListener("click",function(){t.setCenter(o.getCenter()),t.fitBounds(o),t.controls[google.maps.ControlPosition.TOP_LEFT].clear()})}void 0===Number.prototype.toRad&&(Number.prototype.toRad=function(){return this*Math.PI/180});